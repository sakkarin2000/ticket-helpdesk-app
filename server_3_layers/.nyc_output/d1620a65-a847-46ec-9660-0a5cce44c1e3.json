{"/Users/sakkarin2000/Development/ticket-helpdesk-app/server_3_layers/src/request/ListTicketRequest.ts":{"path":"/Users/sakkarin2000/Development/ticket-helpdesk-app/server_3_layers/src/request/ListTicketRequest.ts","statementMap":{"0":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"1":{"start":{"line":3,"column":12},"end":{"line":3,"column":28}},"2":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"3":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"4":{"start":{"line":4,"column":79},"end":{"line":4,"column":131}},"5":{"start":{"line":5,"column":9},"end":{"line":5,"column":150}},"6":{"start":{"line":5,"column":22},"end":{"line":5,"column":43}},"7":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"8":{"start":{"line":5,"column":81},"end":{"line":5,"column":150}},"9":{"start":{"line":6,"column":4},"end":{"line":6,"column":66}},"10":{"start":{"line":8,"column":17},"end":{"line":10,"column":1}},"11":{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},"12":{"start":{"line":9,"column":79},"end":{"line":9,"column":109}},"13":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"14":{"start":{"line":12,"column":0},"end":{"line":12,"column":52}},"15":{"start":{"line":13,"column":26},"end":{"line":13,"column":52}},"16":{"start":{"line":15,"column":0},"end":{"line":21,"column":53}},"17":{"start":{"line":16,"column":4},"end":{"line":16,"column":34}},"18":{"start":{"line":17,"column":4},"end":{"line":17,"column":36}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":36}},"21":{"start":{"line":20,"column":4},"end":{"line":20,"column":36}},"22":{"start":{"line":24,"column":0},"end":{"line":27,"column":49}},"23":{"start":{"line":28,"column":0},"end":{"line":31,"column":50}},"24":{"start":{"line":32,"column":0},"end":{"line":36,"column":50}},"25":{"start":{"line":37,"column":0},"end":{"line":37,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":46},"end":{"line":2,"column":47}},"loc":{"start":{"line":2,"column":87},"end":{"line":7,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":46},"end":{"line":8,"column":47}},"loc":{"start":{"line":8,"column":62},"end":{"line":10,"column":1}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":1},"end":{"line":15,"column":2}},"loc":{"start":{"line":15,"column":19},"end":{"line":21,"column":1}},"line":15}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":18},"end":{"line":2,"column":22}},{"start":{"line":2,"column":26},"end":{"line":2,"column":41}},{"start":{"line":2,"column":46},"end":{"line":7,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":42},"end":{"line":3,"column":48}},{"start":{"line":3,"column":51},"end":{"line":3,"column":125}}],"line":3},"2":{"loc":{"start":{"line":3,"column":51},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":67},"end":{"line":3,"column":118}},{"start":{"line":3,"column":121},"end":{"line":3,"column":125}}],"line":3},"3":{"loc":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},{"start":{"line":4,"column":4},"end":{"line":5,"column":150}}],"line":4},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":77}},"type":"binary-expr","locations":[{"start":{"line":4,"column":8},"end":{"line":4,"column":35}},{"start":{"line":4,"column":39},"end":{"line":4,"column":77}}],"line":4},"5":{"loc":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},{"start":{"line":5,"column":58},"end":{"line":5,"column":150}}],"line":5},"6":{"loc":{"start":{"line":5,"column":85},"end":{"line":5,"column":149}},"type":"binary-expr","locations":[{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},{"start":{"line":5,"column":148},"end":{"line":5,"column":149}}],"line":5},"7":{"loc":{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":94},"end":{"line":5,"column":98}},{"start":{"line":5,"column":101},"end":{"line":5,"column":143}}],"line":5},"8":{"loc":{"start":{"line":5,"column":101},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":109},"end":{"line":5,"column":126}},{"start":{"line":5,"column":129},"end":{"line":5,"column":143}}],"line":5},"9":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":62}},"type":"binary-expr","locations":[{"start":{"line":6,"column":11},"end":{"line":6,"column":16}},{"start":{"line":6,"column":20},"end":{"line":6,"column":21}},{"start":{"line":6,"column":25},"end":{"line":6,"column":62}}],"line":6},"10":{"loc":{"start":{"line":8,"column":17},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":8,"column":18},"end":{"line":8,"column":22}},{"start":{"line":8,"column":26},"end":{"line":8,"column":41}},{"start":{"line":8,"column":46},"end":{"line":10,"column":1}}],"line":8},"11":{"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},{"start":{"line":9,"column":4},"end":{"line":9,"column":109}}],"line":9},"12":{"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":77}},"type":"binary-expr","locations":[{"start":{"line":9,"column":8},"end":{"line":9,"column":35}},{"start":{"line":9,"column":39},"end":{"line":9,"column":77}}],"line":9},"13":{"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":51}},"type":"binary-expr","locations":[{"start":{"line":21,"column":12},"end":{"line":21,"column":26}},{"start":{"line":21,"column":31},"end":{"line":21,"column":50}}],"line":21}},"s":{"0":1,"1":3,"2":3,"3":3,"4":0,"5":3,"6":3,"7":7,"8":4,"9":3,"10":1,"11":3,"12":0,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1},"f":{"0":3,"1":3,"2":1},"b":{"0":[1,1,1],"1":[0,3],"2":[0,3],"3":[0,3],"4":[3,3],"5":[4,3],"6":[4,4],"7":[0,4],"8":[4,0],"9":[3,3,0],"10":[1,1,1],"11":[0,3],"12":[3,3],"13":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/sakkarin2000/Development/ticket-helpdesk-app/server_3_layers/src/request/ListTicketRequest.ts","sources":["/Users/sakkarin2000/Development/ticket-helpdesk-app/server_3_layers/src/request/ListTicketRequest.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,qDAA+D;AAC/D,IAAY,MAMX;AAND,WAAY,MAAM;IAChB,6BAAmB,CAAA;IACnB,+BAAqB,CAAA;IACrB,+BAAqB,CAAA;IACrB,+BAAqB,CAAA;IACrB,+BAAqB,CAAA;AACvB,CAAC,EANW,MAAM,GAAN,cAAM,KAAN,cAAM,QAMjB;AAED,MAAa,iBAAiB;CAQ7B;AAPC;IAAC,IAAA,0BAAQ,GAAE;;gDACG;AACd;IAAC,IAAA,0BAAQ,GAAE;;iDACI;AACf;IAAC,IAAA,wBAAM,EAAC,MAAM,CAAC;IACd,IAAA,4BAAU,GAAE;;iDACD;AAPd,8CAQC","sourcesContent":["import { IsEnum, IsNumber, IsOptional } from 'class-validator';\nexport enum Status {\n  Pending = 'Pending',\n  Accepted = 'Accepted',\n  Rejected = 'Rejected',\n  Resolved = 'Resolved',\n  Canceled = 'Canceled',\n}\n\nexport class ListTicketRequest {\n  @IsNumber()\n  limit: number;\n  @IsNumber()\n  offset: number;\n  @IsEnum(Status)\n  @IsOptional()\n  status: any;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"845ca0c4b22f3eb31daa76a86c8c5f8df7f59811"},"/Users/sakkarin2000/Development/ticket-helpdesk-app/server_3_layers/src/services/TicketService.ts":{"path":"/Users/sakkarin2000/Development/ticket-helpdesk-app/server_3_layers/src/services/TicketService.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":67}},"2":{"start":{"line":4,"column":30},"end":{"line":4,"column":71}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":37}},"4":{"start":{"line":10,"column":22},"end":{"line":10,"column":24}},"5":{"start":{"line":11,"column":32},"end":{"line":11,"column":71}},"6":{"start":{"line":12,"column":20},"end":{"line":12,"column":21}},"7":{"start":{"line":13,"column":8},"end":{"line":16,"column":9}},"8":{"start":{"line":14,"column":12},"end":{"line":14,"column":84}},"9":{"start":{"line":15,"column":12},"end":{"line":15,"column":85}},"10":{"start":{"line":17,"column":8},"end":{"line":20,"column":9}},"11":{"start":{"line":18,"column":12},"end":{"line":18,"column":68}},"12":{"start":{"line":19,"column":12},"end":{"line":19,"column":45}},"13":{"start":{"line":21,"column":22},"end":{"line":21,"column":36}},"14":{"start":{"line":22,"column":30},"end":{"line":22,"column":54}},"15":{"start":{"line":23,"column":25},"end":{"line":29,"column":9}},"16":{"start":{"line":30,"column":29},"end":{"line":34,"column":9}},"17":{"start":{"line":35,"column":8},"end":{"line":35,"column":28}},"18":{"start":{"line":38,"column":23},"end":{"line":38,"column":67}},"19":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"20":{"start":{"line":40,"column":12},"end":{"line":40,"column":71}},"21":{"start":{"line":42,"column":8},"end":{"line":42,"column":67}},"22":{"start":{"line":45,"column":31},"end":{"line":45,"column":80}},"23":{"start":{"line":46,"column":35},"end":{"line":48,"column":18}},"24":{"start":{"line":49,"column":33},"end":{"line":49,"column":71}},"25":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"26":{"start":{"line":51,"column":12},"end":{"line":51,"column":65}},"27":{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},"28":{"start":{"line":54,"column":12},"end":{"line":54,"column":79}},"29":{"start":{"line":56,"column":23},"end":{"line":56,"column":78}},"30":{"start":{"line":57,"column":8},"end":{"line":59,"column":9}},"31":{"start":{"line":58,"column":12},"end":{"line":58,"column":67}},"32":{"start":{"line":60,"column":8},"end":{"line":60,"column":67}},"33":{"start":{"line":63,"column":29},"end":{"line":63,"column":64}},"34":{"start":{"line":64,"column":8},"end":{"line":64,"column":28}},"35":{"start":{"line":67,"column":29},"end":{"line":67,"column":86}},"36":{"start":{"line":68,"column":8},"end":{"line":68,"column":28}},"37":{"start":{"line":71,"column":0},"end":{"line":71,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":28},"end":{"line":8,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":34},"end":{"line":36,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":37,"column":4},"end":{"line":37,"column":5}},"loc":{"start":{"line":37,"column":33},"end":{"line":43,"column":5}},"line":37},"3":{"name":"(anonymous_3)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":44},"end":{"line":61,"column":5}},"line":44},"4":{"name":"(anonymous_4)","decl":{"start":{"line":62,"column":4},"end":{"line":62,"column":5}},"loc":{"start":{"line":62,"column":24},"end":{"line":65,"column":5}},"line":62},"5":{"name":"(anonymous_5)","decl":{"start":{"line":66,"column":4},"end":{"line":66,"column":5}},"loc":{"start":{"line":66,"column":46},"end":{"line":69,"column":5}},"line":66}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":32},"end":{"line":11,"column":71}},"type":"cond-expr","locations":[{"start":{"line":11,"column":59},"end":{"line":11,"column":63}},{"start":{"line":11,"column":66},"end":{"line":11,"column":71}}],"line":11},"1":{"loc":{"start":{"line":13,"column":8},"end":{"line":16,"column":9}},"type":"if","locations":[{"start":{"line":13,"column":8},"end":{"line":16,"column":9}},{"start":{"line":13,"column":8},"end":{"line":16,"column":9}}],"line":13},"2":{"loc":{"start":{"line":17,"column":8},"end":{"line":20,"column":9}},"type":"if","locations":[{"start":{"line":17,"column":8},"end":{"line":20,"column":9}},{"start":{"line":17,"column":8},"end":{"line":20,"column":9}}],"line":17},"3":{"loc":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"type":"if","locations":[{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},{"start":{"line":39,"column":8},"end":{"line":41,"column":9}}],"line":39},"4":{"loc":{"start":{"line":46,"column":35},"end":{"line":48,"column":18}},"type":"cond-expr","locations":[{"start":{"line":47,"column":14},"end":{"line":47,"column":28}},{"start":{"line":48,"column":14},"end":{"line":48,"column":18}}],"line":46},"5":{"loc":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},{"start":{"line":50,"column":8},"end":{"line":52,"column":9}}],"line":50},"6":{"loc":{"start":{"line":50,"column":12},"end":{"line":50,"column":103}},"type":"binary-expr","locations":[{"start":{"line":50,"column":12},"end":{"line":50,"column":30}},{"start":{"line":50,"column":34},"end":{"line":50,"column":103}}],"line":50},"7":{"loc":{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},"type":"if","locations":[{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},{"start":{"line":53,"column":8},"end":{"line":55,"column":9}}],"line":53},"8":{"loc":{"start":{"line":57,"column":8},"end":{"line":59,"column":9}},"type":"if","locations":[{"start":{"line":57,"column":8},"end":{"line":59,"column":9}},{"start":{"line":57,"column":8},"end":{"line":59,"column":9}}],"line":57}},"s":{"0":1,"1":1,"2":1,"3":26,"4":2,"5":2,"6":2,"7":2,"8":1,"9":1,"10":2,"11":1,"12":1,"13":2,"14":2,"15":2,"16":2,"17":2,"18":2,"19":2,"20":1,"21":1,"22":21,"23":21,"24":21,"25":21,"26":13,"27":8,"28":1,"29":7,"30":7,"31":1,"32":6,"33":4,"34":4,"35":5,"36":5,"37":1},"f":{"0":26,"1":2,"2":2,"3":21,"4":4,"5":5},"b":{"0":[1,1],"1":[1,1],"2":[1,1],"3":[1,1],"4":[20,1],"5":[13,8],"6":[21,20],"7":[1,7],"8":[1,6]},"inputSourceMap":{"version":3,"file":"/Users/sakkarin2000/Development/ticket-helpdesk-app/server_3_layers/src/services/TicketService.ts","sources":["/Users/sakkarin2000/Development/ticket-helpdesk-app/server_3_layers/src/services/TicketService.ts"],"names":[],"mappings":"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","sourcesContent":["import { TicketEntity, TicketRepository } from '../repository/TicketRepository';\nimport { CreateTicketRequest } from '../request/CreateTicketRequest';\nimport { ListTicketRequest, Status } from '../request/ListTicketRequest';\nimport { UpdateTicketRequest, ValidTransitions } from '../request/UpdateTicketRequest';\n\nexport default class TicketService {\n  constructor(private ticketRepo: TicketRepository) {}\n\n  async list(listTicketRequest: ListTicketRequest) {\n    let tickets: TicketEntity[] = [];\n    const hasStatusFilter = listTicketRequest.status ? true : false;\n    let total = 0;\n\n    if (hasStatusFilter) {\n      tickets = await this.ticketRepo.listWithStatusFilter(listTicketRequest);\n      total = await this.totalTicketWithStatusFilter(listTicketRequest.status);\n    }\n    if (!hasStatusFilter) {\n      tickets = await this.ticketRepo.list(listTicketRequest);\n      total = await this.totalTicket();\n    }\n    const count = tickets.length;\n    const overall_total = await this.totalTicket();\n\n    const metadata = {\n      limit: listTicketRequest.limit,\n      offset: listTicketRequest.offset,\n      count,\n      total: total,\n      overall_total: overall_total,\n    };\n\n    const responseData = {\n      data: tickets,\n      meta: metadata,\n      message: 'Get all tickets Success',\n    };\n    return responseData;\n  }\n  async create(ticketToCreate: CreateTicketRequest) {\n    const result = await this.ticketRepo.create(ticketToCreate);\n    if (result.rowCount == 0) {\n      return { success: false, message: 'Create Ticket Failed' };\n    }\n    return { success: true, message: 'Create Ticket Success' };\n  }\n\n  async update(ticket_id: string, ticketToUpdate: UpdateTicketRequest) {\n    const current_status = await this.ticketRepo.getCurrentStatus(ticket_id);\n\n    const verifiedEnumStatus: Status | null = Object.values(Status).includes(current_status as Status)\n      ? (current_status as Status)\n      : null;\n\n    const validTransitions = ValidTransitions;\n\n    if (verifiedEnumStatus && !validTransitions[verifiedEnumStatus].includes(ticketToUpdate.status)) {\n      return { success: false, message: 'Invalid status' };\n    }\n    if (!verifiedEnumStatus) {\n      return { success: false, message: 'Invalid status from database' };\n    }\n    const result = await this.ticketRepo.update(ticket_id, ticketToUpdate);\n    if (result.rowCount == 0) {\n      return { success: false, message: 'Ticket Not Found' };\n    }\n    return { success: true, message: 'Update Ticket Success' };\n  }\n\n  async totalTicket() {\n    const total_ticket = await this.ticketRepo.totalTicket();\n    return total_ticket;\n  }\n\n  async totalTicketWithStatusFilter(status: string) {\n    const total_ticket = await this.ticketRepo.totalTicketWithStatusFilter(status);\n    return total_ticket;\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c2a1c63bd82dd1ef4fc8bdae87b01bc160cb2b3a"},"/Users/sakkarin2000/Development/ticket-helpdesk-app/server_3_layers/src/request/UpdateTicketRequest.ts":{"path":"/Users/sakkarin2000/Development/ticket-helpdesk-app/server_3_layers/src/request/UpdateTicketRequest.ts","statementMap":{"0":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"1":{"start":{"line":3,"column":12},"end":{"line":3,"column":28}},"2":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"3":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"4":{"start":{"line":4,"column":79},"end":{"line":4,"column":131}},"5":{"start":{"line":5,"column":9},"end":{"line":5,"column":150}},"6":{"start":{"line":5,"column":22},"end":{"line":5,"column":43}},"7":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"8":{"start":{"line":5,"column":81},"end":{"line":5,"column":150}},"9":{"start":{"line":6,"column":4},"end":{"line":6,"column":66}},"10":{"start":{"line":8,"column":17},"end":{"line":10,"column":1}},"11":{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},"12":{"start":{"line":9,"column":79},"end":{"line":9,"column":109}},"13":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"14":{"start":{"line":12,"column":0},"end":{"line":12,"column":64}},"15":{"start":{"line":13,"column":26},"end":{"line":13,"column":52}},"16":{"start":{"line":15,"column":0},"end":{"line":21,"column":28}},"17":{"start":{"line":16,"column":4},"end":{"line":16,"column":34}},"18":{"start":{"line":17,"column":4},"end":{"line":17,"column":36}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":36}},"21":{"start":{"line":20,"column":4},"end":{"line":20,"column":36}},"22":{"start":{"line":22,"column":0},"end":{"line":28,"column":2}},"23":{"start":{"line":31,"column":0},"end":{"line":34,"column":51}},"24":{"start":{"line":35,"column":0},"end":{"line":38,"column":57}},"25":{"start":{"line":39,"column":0},"end":{"line":42,"column":58}},"26":{"start":{"line":43,"column":0},"end":{"line":46,"column":52}},"27":{"start":{"line":47,"column":0},"end":{"line":47,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":46},"end":{"line":2,"column":47}},"loc":{"start":{"line":2,"column":87},"end":{"line":7,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":46},"end":{"line":8,"column":47}},"loc":{"start":{"line":8,"column":62},"end":{"line":10,"column":1}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":1},"end":{"line":15,"column":2}},"loc":{"start":{"line":15,"column":19},"end":{"line":21,"column":1}},"line":15}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":18},"end":{"line":2,"column":22}},{"start":{"line":2,"column":26},"end":{"line":2,"column":41}},{"start":{"line":2,"column":46},"end":{"line":7,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":42},"end":{"line":3,"column":48}},{"start":{"line":3,"column":51},"end":{"line":3,"column":125}}],"line":3},"2":{"loc":{"start":{"line":3,"column":51},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":67},"end":{"line":3,"column":118}},{"start":{"line":3,"column":121},"end":{"line":3,"column":125}}],"line":3},"3":{"loc":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},{"start":{"line":4,"column":4},"end":{"line":5,"column":150}}],"line":4},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":77}},"type":"binary-expr","locations":[{"start":{"line":4,"column":8},"end":{"line":4,"column":35}},{"start":{"line":4,"column":39},"end":{"line":4,"column":77}}],"line":4},"5":{"loc":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},{"start":{"line":5,"column":58},"end":{"line":5,"column":150}}],"line":5},"6":{"loc":{"start":{"line":5,"column":85},"end":{"line":5,"column":149}},"type":"binary-expr","locations":[{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},{"start":{"line":5,"column":148},"end":{"line":5,"column":149}}],"line":5},"7":{"loc":{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":94},"end":{"line":5,"column":98}},{"start":{"line":5,"column":101},"end":{"line":5,"column":143}}],"line":5},"8":{"loc":{"start":{"line":5,"column":101},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":109},"end":{"line":5,"column":126}},{"start":{"line":5,"column":129},"end":{"line":5,"column":143}}],"line":5},"9":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":62}},"type":"binary-expr","locations":[{"start":{"line":6,"column":11},"end":{"line":6,"column":16}},{"start":{"line":6,"column":20},"end":{"line":6,"column":21}},{"start":{"line":6,"column":25},"end":{"line":6,"column":62}}],"line":6},"10":{"loc":{"start":{"line":8,"column":17},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":8,"column":18},"end":{"line":8,"column":22}},{"start":{"line":8,"column":26},"end":{"line":8,"column":41}},{"start":{"line":8,"column":46},"end":{"line":10,"column":1}}],"line":8},"11":{"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},{"start":{"line":9,"column":4},"end":{"line":9,"column":109}}],"line":9},"12":{"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":77}},"type":"binary-expr","locations":[{"start":{"line":9,"column":8},"end":{"line":9,"column":35}},{"start":{"line":9,"column":39},"end":{"line":9,"column":77}}],"line":9},"13":{"loc":{"start":{"line":21,"column":3},"end":{"line":21,"column":26}},"type":"binary-expr","locations":[{"start":{"line":21,"column":3},"end":{"line":21,"column":9}},{"start":{"line":21,"column":14},"end":{"line":21,"column":25}}],"line":21}},"s":{"0":1,"1":4,"2":4,"3":4,"4":0,"5":4,"6":4,"7":8,"8":4,"9":4,"10":1,"11":4,"12":0,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1},"f":{"0":4,"1":4,"2":1},"b":{"0":[1,1,1],"1":[0,4],"2":[0,4],"3":[0,4],"4":[4,4],"5":[4,4],"6":[4,4],"7":[0,4],"8":[4,0],"9":[4,4,0],"10":[1,1,1],"11":[0,4],"12":[4,4],"13":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/sakkarin2000/Development/ticket-helpdesk-app/server_3_layers/src/request/UpdateTicketRequest.ts","sources":["/Users/sakkarin2000/Development/ticket-helpdesk-app/server_3_layers/src/request/UpdateTicketRequest.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,qDAAmD;AAEnD,IAAK,MAMJ;AAND,WAAK,MAAM;IACT,6BAAmB,CAAA;IACnB,+BAAqB,CAAA;IACrB,+BAAqB,CAAA;IACrB,+BAAqB,CAAA;IACrB,+BAAqB,CAAA;AACvB,CAAC,EANI,MAAM,KAAN,MAAM,QAMV;AAEY,QAAA,gBAAgB,GAEzB;IACF,OAAO,EAAE,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,CAAa;IACzD,QAAQ,EAAE,EAAc;IACxB,QAAQ,EAAE,CAAC,UAAU,CAAa;IAClC,QAAQ,EAAE,CAAC,UAAU,CAAa;IAClC,QAAQ,EAAE,EAAc;CACzB,CAAC;AAEF,MAAa,mBAAmB;CAS/B;AARC;IAAC,IAAA,0BAAQ,GAAE;;kDACG;AACd;IAAC,IAAA,0BAAQ,GAAE;;wDACS;AACpB;IAAC,IAAA,0BAAQ,GAAE;;yDACU;AACrB;IAAC,IAAA,wBAAM,EAAC,MAAM,CAAC;;mDACA;AARjB,kDASC","sourcesContent":["import { IsEnum, IsString } from 'class-validator';\n\nenum Status {\n  Pending = 'Pending',\n  Accepted = 'Accepted',\n  Rejected = 'Rejected',\n  Resolved = 'Resolved',\n  Canceled = 'Canceled',\n}\n\nexport const ValidTransitions: {\n  [key in Status]: Status[];\n} = {\n  Pending: ['Accepted', 'Rejected', 'Canceled'] as Status[],\n  Canceled: [] as Status[],\n  Accepted: ['Resolved'] as Status[],\n  Rejected: ['Accepted'] as Status[],\n  Resolved: [] as Status[],\n};\n\nexport class UpdateTicketRequest {\n  @IsString()\n  title: string;\n  @IsString()\n  description: string;\n  @IsString()\n  contact_info: string;\n  @IsEnum(Status)\n  status: Status;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"23a35410e061a438a97c08463c23fee226756c50"}}